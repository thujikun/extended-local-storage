var ExtendedLocalStorage=function(a){this.init(a);};ExtendedLocalStorage.prototype={init:function(b){var a=this,c;if(!b){return false;}c=b.split("/");a.iframe=document.createElement("iframe");
a.iframe.style.display="none";a.origin=c[0]+"//"+c[2];a.loadEndFlag=false;a.iframe.src=b;document.body.appendChild(a.iframe);a.addEvent("load",a.iframe,function(){a.content=a.iframe.contentWindow;
a.loadEndFlag=true;});a.callbackTable=[];a.callbackCnt=0;a.setCallbacks();},addEvent:function(b,a,c){if(a.addEventListener){a.addEventListener(b,function(d){c.call(a,d);
},false);}else{if(a.attachEvent){b="on"+b;a.attachEvent(b,function(d){c.call(a,d);});}}},send:function(b){var a=this;if(!window.localStorage||!window.JSON){return false;
}b=JSON.stringify(b);if(a.loadEndFlag){a.content.postMessage(b,a.origin);}else{a.addEvent("load",a.iframe,function(){a.content.postMessage(b,a.origin);
});}},setItem:function(c,e,f){var b=this,a="callback"+b.callbackCnt++,d={type:"set",key:c,value:e,callbackKey:a};b.callbackTable[a]=f;b.send(d);},getItem:function(c,e){var b=this,a="callback"+b.callbackCnt++,d={type:"get",key:c,callbackKey:a};
b.callbackTable[a]=e;b.send(d);},removeItem:function(c,e){var b=this,a="callback"+b.callbackCnt++,d={type:"remove",key:c,callbackKey:a};b.callbackTable[a]=e;
b.send(d);},setCallbacks:function(){var a=this;a.addEvent("message",window,function(c){var b,d;if(c.origin===a.origin){b=JSON.parse(c.data);d=a.callbackTable[b.callbackKey];
if(typeof d==="function"){switch(b.type){case"set":d();break;case"get":d(b.value);break;case"remove":d();break;}}}});}};