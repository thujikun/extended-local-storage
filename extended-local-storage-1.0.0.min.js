var ExtendedLocalStorage=function(a){this.__init(a);};ExtendedLocalStorage.prototype={__init:function(b){var a=this,c;if(!b){return false;}c=b.split("/");
a._iframe=document.createElement("iframe");a._iframe.style.display="none";a._origin=c[0]+"//"+c[2];a._loadEndFlag=false;a._iframe.src=b;document.body.appendChild(a._iframe);
a._addEvent("load",a._iframe,function(){a.content=a._iframe.contentWindow;a._loadEndFlag=true;});a.callbackTable=[];a.callbackCnt=0;a.__setCallback();},__setCallback:function(){var a=this;
a._addEvent("message",window,function(c){var b,d;if(c.origin===a._origin){b=JSON.parse(c.data);d=a.callbackTable[b.callbackKey];if(typeof d==="function"){switch(b.type){case"set":d();
break;case"get":d(b.value);break;case"remove":d();break;}}}});},__getCallbackKey:function(){return self.callbackCnt++;},_send:function(b){var a=this;if(!window.localStorage||!window.JSON){return false;
}b=JSON.stringify(b);if(a._loadEndFlag){setTimeout(function(){a.content.postMessage(b,a._origin);});}else{a._addEvent("load",a._iframe,function(){setTimeout(function(){a.content.postMessage(b,a._origin);
},0);});}},_addEvent:function(b,a,c){if(a.addEventListener){a.addEventListener(b,function(d){c.call(a,d);},false);}else{if(a.attachEvent){b="on"+b;a.attachEvent(b,function(d){c.call(a,d);
});}}},setItem:function(c,e,f){var b=this,a="callback"+b.__getCallbackKey(),d={type:"set",key:c,value:e,callbackKey:a};b.callbackTable[a]=f;b._send(d);
},getItem:function(c,e){var b=this,a="callback"+b.__getCallbackKey(),d={type:"get",key:c,callbackKey:a};b.callbackTable[a]=e;b._send(d);},removeItem:function(c,e){var b=this,a="callback"+b.__getCallbackKey(),d={type:"remove",key:c,callbackKey:a};
b.callbackTable[a]=e;b._send(d);}};