var ExtendedLocalStorage=function(a){this.init(a)};ExtendedLocalStorage.prototype={init:function(b){var a=this,c;if(!b){return false}c=b.split("/");a.iframe=document.createElement("iframe");a.iframe.style.display="none";a.origin=c[0]+"//"+c[2];a.loadEndFlag=false;a.iframe.src=b;document.body.appendChild(a.iframe);a.addEvent("load",a.iframe,function(){a.content=a.iframe.contentWindow;a.loadEndFlag=true})},addEvent:function(b,a,c){if(a.addEventListener){a.addEventListener(b,function(d){c.call(a,d)},false)}else{if(a.attachEvent){b="on"+b;a.attachEvent(b,function(d){c.call(a,d)})}}},send:function(b){var a=this;if(!window.localStorage||!window.JSON){return false}b=JSON.stringify(b);if(a.loadEndFlag){a.content.postMessage(b,a.origin)}else{a.addEvent("load",a.iframe,function(){a.content.postMessage(b,a.origin)})}},setItem:function(b,d,e){var a=this,c={type:"set",key:b,value:d};a.send(c);a.addEvent("message",window,function(g){var f=JSON.parse(g.data);if(g.origin===a.origin&&f.type==="set"){e()}})},getItem:function(b,d){var a=this,c={type:"get",key:b};a.send(c);a.addEvent("message",window,function(g){var f=JSON.parse(g.data);if(g.origin===a.origin&&f.type==="get"){d(f.value)}})}};